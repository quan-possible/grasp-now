@tailwind base;
@tailwind components;  
@tailwind utilities;

:root {
  /* Base surfaces */
  --bg-primary: #FFFFFF;
  --bg-secondary: #FAFAFA;
  --bg-tertiary: #F5F5F5;
  --bg-page: #FCFCFC;

  /* Type */
  --text-primary: #171717;
  --text-secondary: #616161;
  --text-tertiary: #9E9E9E;

  /* Borders (rare) */
  --border-primary: #E0E0E0;
  --border-secondary: #CFCFCF;

  /* Accent */
  --accent: #2563EB;
  --accent-hover: #1E4FDB;

  /* Semantic feedback */
  --success: #16A34A;
  --warning: #F97316;
  --error: #DC2626;

  /* Pastel system */
  --pastel-red: #FEE2E2;
  --pastel-yellow: #FEF9C3;
  --pastel-pink: #FCE7F3;
  --pastel-teal: #CCFBF1;

  /* Typography */
  --font-display: 'Cheltenham', Georgia, 'Times New Roman', serif;
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-serif: 'Georgia', 'Times New Roman', serif;
  --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;

  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-12: 3rem;
  --space-16: 4rem;

  /* Layout */
  --measure-article: 620px;
  --width-drawer: 320px;
  --gap-masonry: 16px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow-md: 0 2px 6px rgba(0,0,0,.06);
  --shadow-lg: 0 8px 20px rgba(0,0,0,.08);
  --shadow-stack: 0 4px 8px rgba(0,0,0,.08), 0 2px 4px rgba(0,0,0,.12), 0 8px 16px rgba(0,0,0,.04);
  --shadow-active: 0 12px 32px rgba(0,0,0,.12);

  /* Radius */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;

  /* Motion */
  --duration-fast: 120ms;
  --duration-normal: 220ms;
  --ease: cubic-bezier(.4,0,.2,1);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-primary: #121212;
    --bg-secondary: #181818;
    --bg-tertiary: #262626;
    --bg-page: #101010;

    --text-primary: #F5F5F5;
    --text-secondary: #BDBDBD;
    --text-tertiary: #757575;

    --border-primary: #262626;
    --border-secondary: #3D3D3D;

    --accent: #5F9BFF;
    --accent-hover: #8AB4FF;

    --success: #22C55E;
    --warning: #FB923C;
    --error: #F87171;

    --pastel-red: #5C1E1E;
    --pastel-yellow: #5C5015;
    --pastel-pink: #5C1E4A;
    --pastel-teal: #134E4A;
  }
}

@layer base {
  * {
    font-synthesis: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    @apply text-text-primary bg-bg-page leading-normal;
  }
  
  /* Typography Hierarchy - Design System v3.1 */
  h1 {
    font-family: Cheltenham, Georgia, 'Times New Roman', serif;
    @apply text-3xl font-bold text-text-primary leading-tight mb-6;
  }
  
  h2 {
    font-family: Cheltenham, Georgia, 'Times New Roman', serif;
    @apply text-3xl font-bold text-text-primary leading-tight mb-5;
  }
  
  h3 {
    font-family: Cheltenham, Georgia, 'Times New Roman', serif;
    @apply text-2xl font-semibold text-text-primary leading-tight mb-4;
  }
  
  h4 {
    @apply text-xl font-semibold text-text-primary leading-tight mb-3;
  }
  
  h5 {
    @apply text-lg font-semibold text-text-primary leading-normal mb-3;
  }
  
  h6 {
    @apply text-lg font-medium text-text-primary leading-normal mb-2;
  }
  
  p {
    @apply text-lg text-text-secondary leading-normal mb-4;
  }
  
  /* Lens-specific content overrides */
  .editor-container { 
    --font-content: theme('fontFamily.sans'); 
    --text-content: theme('fontSize.lg'); 
    --leading-content: theme('lineHeight.normal'); 
  }
  .editor-container.lens-story { 
    --font-content: theme('fontFamily.serif'); 
    --text-content: theme('fontSize.lg'); 
    --leading-content: theme('lineHeight.relaxed'); 
  }
  .editor-container.lens-slide { 
    --font-content: theme('fontFamily.sans'); 
    --text-content: theme('fontSize.xl'); 
    --leading-content: theme('lineHeight.tight'); 
  }
  
  /* Reading sheet pattern */
  .reading-page {
    background: theme('colors.bg-page');
    @apply flex justify-center;
  }
  
  .paper-sheet {
    background: theme('colors.bg-primary');
    max-width: theme('maxWidth.article');
    @apply w-full px-6 py-8 shadow-md rounded-xl;
  }
}

@layer components {
  /* Card Components */
  .card {
    @apply bg-bg-primary rounded-xl shadow-md transition-all duration-fast ease-in-out;
  }
  
  .card-stack {
    @apply bg-bg-primary rounded-xl shadow-stack hover:shadow-active transition-all duration-normal ease-in-out;
  }
  
  .card:hover {
    @apply shadow-lg -translate-y-0.5;
  }
  
  /* Button Components */
  .btn-primary {
    @apply bg-accent text-white px-4 py-2 rounded-lg font-medium font-sans hover:bg-accent-hover transition-all duration-fast ease-in-out active:scale-[0.98];
  }
  
  .btn-secondary {
    @apply bg-bg-tertiary text-text-primary px-4 py-2 rounded-lg font-medium font-sans hover:bg-bg-secondary transition-all duration-fast ease-in-out active:scale-[0.97];
  }
  
  .btn-muted {
    @apply bg-pastel-teal text-text-primary px-4 py-2 rounded-lg font-medium font-sans transition-all duration-fast ease-in-out;
  }
  
  .btn-muted[aria-selected="true"],
  .btn-toggle.is-selected {
    @apply bg-pastel-red text-accent;
  }
  
  /* Interaction States */
  .hover-lift:hover { 
    @apply -translate-y-0.5 shadow-md; 
  }
  
  .focus-ring:focus-visible { 
    @apply outline-2 outline-accent outline-offset-2; 
  }
  
  .active-scale:active { 
    @apply scale-[0.97]; 
  }
  
  /* Tag Pills */
  .tag-pill {
    @apply bg-pastel-yellow text-text-primary font-sans font-medium text-xs px-2 py-1 rounded-full transition-all duration-fast ease-in-out;
    @apply hover:-translate-y-0.5 hover:shadow-sm active:scale-95;
  }
  
  /* Gradient Hero */
  .gradient-hero {
    background: radial-gradient(circle at center, theme('colors.gradient-center') 0%, theme('colors.gradient-edge') 100%);
    isolation: isolate;
  }
  
  .gradient-hero h1 {
    font: 700 theme('fontSize.5xl')/1.1 Cheltenham, Georgia, serif;
    max-width: 18ch;
  }
  
  /* Drawer */
  .drawer {
    width: theme('width.drawer');
    @apply bg-bg-secondary shadow-drawer;
    transform: translateX(100%);
    opacity: 0;
    transition: transform theme('transitionDuration.normal') theme('transitionTimingFunction.ease'),
                opacity theme('transitionDuration.normal') theme('transitionTimingFunction.ease');
  }
  
  .drawer.open {
    transform: translateX(0);
    opacity: 1;
  }
  
  @media(min-width: 1440px) {
    .drawer.auto-desktop { 
      transform: translateX(0); 
      opacity: 1; 
    }
  }
  
  /* Text utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Scrollbar hiding */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
